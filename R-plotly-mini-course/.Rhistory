add_lines(y=~I,
name="Investment") %>%
add_lines(y=~Ex,
name="Export") %>%
add_lines(y=~Im,
name="Import")-> p0
p0
data.vis.1.sa %>% plot_ly(x=~date) %>%
add_lines(y=~GDP,
name="GDP") %>%
add_lines(y=~C,
name="Consumption") %>%
add_lines(y=~G,
name="Gov't Purchase") %>%
add_lines(y=~I,
name="Investment") %>%
add_lines(y=~Ex,
name="Export") %>%
add_lines(y=~Im,
name="Import")-> p0
p0
api_create(p0,filename="taiwan real gdp SA",fileopt="new")
Sys.setenv("plotly_username"="PoMingChen")
Sys.setenv("plotly_api_key"="6NYBraV1n8kQ4U1IEzgW")
api_create(p0,filename="taiwan real gdp SA",fileopt="new")
Sys.setenv("plotly_username"="PoMingChen")
Sys.setenv("plotly_api_key"="6NYBraV1n8kQ4U1IEzgW")
api_create(p0,filename="taiwan real gdp SA",fileopt="overwrite")
api_create(p0,filename="taiwan real gdp SA",fileopt="overwrite")
data.vis.1.sa %>% plot_ly(x=~date) %>%
add_lines(y=~GDP,
name="GDP") %>%
add_lines(y=~C,
name="Consumption") %>%
add_lines(y=~G,
name="Gov't Purchase") %>%
add_lines(y=~I,
name="Investment") %>%
add_lines(y=~Ex,
name="Export") %>%
add_lines(y=~Im,
name="Import")-> p0
p0
api_create(p0,filename="taiwan real gdp SA",fileopt="overwrite")
p0 %>% layout(
annotations = list(
list(
x = "2017-01-01 08:00:00.13650",
y = 4147012.08557,
font = list(
color = "rgb(31, 119, 180)",
size = 14
),
showarrow = FALSE,
text = "GDP",
xref = "x",
yref = "y"
),
list(
x = "2017-01-01",
y = 2014401.37845,
font = list(
color = "rgb(255, 127, 14)",
size = 15
),
showarrow = FALSE,
text = "Consumption",
xref = "x",
yref = "y"
),
list(
x = "2017-01-01 08:00:00.13560",
y = 3203437.8329,
font = list(
color = "rgb(148, 103, 189)",
size = 15
),
showarrow = FALSE,
text = "Export",
xref = "x",
yref = "y"
),
list(
x = "2017-01-01 08:00:00.13610",
y = 2509189.21718,
font = list(
color = "rgb(140, 86, 75)",
size = 15
),
showarrow = FALSE,
text = "Import",
xref = "x",
yref = "y"
),
list(
x = "2017-01-01",
y = 1075946.98695,
font = list(
color = "rgb(214, 39, 40)",
size = 15
),
showarrow = FALSE,
text = "Investment",
xref = "x",
yref = "y"
),
list(
x = "2017-01-01 08:00:00.1353",
y = 707720.937129,
font = list(
color = "rgb(44, 160, 44)",
size = 15
),
showarrow = FALSE,
text = "Gov Purchase",
xref = "x",
yref = "y"
),
list(
x = 0.5,
y = 1.03007518797,
showarrow = FALSE,
text = "Chained-dallor year = 2011, in NTD million, Seasonally Adjusted",
xref = "paper",
yref = "paper"
),
list(
x = 0,
y = -0.0892116182573,
showarrow = FALSE,
text = "Source: <a href=\"data.gov.tw\">Taiwan Open Data</a>",
xanchor = "left",
xref = "paper",
yref = "paper"
)
),
dragmode = "zoom",
hovermode = "closest",
margin = list(
r = 80,
t = 55,
b = 90,
l = 60
),
showlegend = FALSE,
title = "Taiwan Real GDP and its Components",
xaxis = list(
autorange = TRUE,
categoryarraysrc = "tpemartin:82:10f067",
categoryorder = "array",
domain = c(0, 1),
nticks = 9,
range = c("1982-01-01", "2018-11-22 15:10:14.3975"),
showgrid = FALSE,
showline = FALSE,
showspikes = FALSE,
tickmode = "auto",
title = "<br>",
type = "date",
zerolinewidth = 1
),
yaxis = list(
autorange = TRUE,
domain = c(0, 1),
range = c(-59416.6666667, 4251896.66667),
showgrid = TRUE,
showspikes = FALSE,
side = "right",
title = "<br>",
type = "linear"
)
)
rm(list=ls())
data.vis.1.sa<-read.csv("./_data/data.vis.1.sa.csv")
load("~/Documents/GitHub/R-plotly-mini-course/R-plotly-mini-course/_data/data.vis.1.Rdata")
View(data.vis.1.Rdata)
View("data.vis.1.Rdata")
#請觀察每一個變數的屬性（class)
head(data.vis.1.sa)
#請觀察`date`變數的變化。由<fctr>轉為
head(data.vis.1.sa)
data.vis.1.sa$date <- as.Date(data.vis.1.sa$date)
#請觀察`date`變數的變化。由<fctr>轉為
head(data.vis.1.sa)
rm(list=ls())
data.vis.1.sa<-read.csv("./_data/data.vis.1.sa.csv")
data.vis.1.sa<-read.csv("./_data/data.vis.1.sa.csv")
#請觀察每一個變數的屬性（class)
head(data.vis.1.sa)
data.vis.1.sa$date <- as.Date(data.vis.1.sa$date)
data.vis.1.sa %>% plot_ly(x=~date)
library(dplyr)
data.vis.1.sa %>% plot_ly(x=~date)
#請觀察`date`變數的變化。由<fctr>轉為<date>
head(data.vis.1.sa)
#安裝套件
install.packages("plotly")
#安裝套件
install.packages("plotly")
#把套件召喚出來
library(plotly)
library(dplyr)
data.vis.1.sa %>% plot_ly(x=~date) %>%
add_lines(y=~GDP,
name="GDP") -> p0
p0
data.vis.1.sa %>% plot_ly(x=~date)
library(dplyr)
data.vis.1.sa %>% plot_ly(x=~date) %>%
add_lines(y=~GDP,
name="GDP") -> p0
p0
library(dplyr)
data.vis.1.sa %>% plot_ly(x=~date) %>%
add_lines(y=~GDP,
name="GDP", color = I("red")) -> p0
p0
library(dplyr)
data.vis.1.sa %>% plot_ly(x=~date) %>%
add_lines(y=~GDP,
name="GDP",
color = I("red"),
alpha = 0.5 ) -> p0
p0
library(dplyr)
data.vis.1.sa %>% plot_ly(x=~date) %>%
add_lines(y=~GDP,
name="GDP",
color = I("red"),
alpha = 0.2 ) -> p0
p0
#請觀察`date`變數的變化。由<fctr>轉為<date>
head(data.vis.1.sa)
data.vis.1.sa
# object as it's first input argument and returns a modified plotly object
add_lines(plot_ly(economics, x = ~date, y = ~unemploy/pop))
# To make code more readable, plotly imports the pipe operator from magrittr
economics %>% plot_ly(x = ~date, y = ~unemploy/pop) %>% add_lines()
# object as it's first input argument and returns a modified plotly object
economics
p0
#將資料的所有變數一起寫完
data.vis.1.sa %>% plot_ly(x=~date) %>%
add_lines(y=~GDP,
name="GDP") %>%
add_lines(y=~C,
name="Consumption") %>%
add_lines(y=~G,
name="Gov't Purchase") %>%
add_lines(y=~I,
name="Investment") %>%
add_lines(y=~Ex,
name="Export") %>%
add_lines(y=~Im,
name="Import")-> p0
p0
p0 %>% layout(
annotations = list(
list(
x = "2017-01-01 08:00:00.13650",
y = 4147012.08557,
font = list(
color = "rgb(31, 119, 180)",
size = 14
),
showarrow = FALSE,
text = "GDP",
xref = "x",
yref = "y"
),
list(
x = "2017-01-01",
y = 2014401.37845,
font = list(
color = "rgb(255, 127, 14)",
size = 15
),
showarrow = FALSE,
text = "Consumption",
xref = "x",
yref = "y"
),
list(
x = "2017-01-01 08:00:00.13560",
y = 3203437.8329,
font = list(
color = "rgb(148, 103, 189)",
size = 15
),
showarrow = FALSE,
text = "Export",
xref = "x",
yref = "y"
),
list(
x = "2017-01-01 08:00:00.13610",
y = 2509189.21718,
font = list(
color = "rgb(140, 86, 75)",
size = 15
),
showarrow = FALSE,
text = "Import",
xref = "x",
yref = "y"
),
list(
x = "2017-01-01",
y = 1075946.98695,
font = list(
color = "rgb(214, 39, 40)",
size = 15
),
showarrow = FALSE,
text = "Investment",
xref = "x",
yref = "y"
),
list(
x = "2017-01-01 08:00:00.1353",
y = 707720.937129,
font = list(
color = "rgb(44, 160, 44)",
size = 15
),
showarrow = FALSE,
text = "Gov Purchase",
xref = "x",
yref = "y"
),
list(
x = 0.5,
y = 1.03007518797,
showarrow = FALSE,
text = "Chained-dallor year = 2011, in NTD million, Seasonally Adjusted",
xref = "paper",
yref = "paper"
),
list(
x = 0,
y = -0.0892116182573,
showarrow = FALSE,
text = "Source: <a href=\"data.gov.tw\">Taiwan Open Data</a>",
xanchor = "left",
xref = "paper",
yref = "paper"
)
),
dragmode = "zoom",
hovermode = "closest",
margin = list(
r = 80,
t = 55,
b = 90,
l = 60
),
showlegend = FALSE,
title = "Taiwan Real GDP and its Components",
xaxis = list(
autorange = TRUE,
categoryarraysrc = "tpemartin:82:10f067",
categoryorder = "array",
domain = c(0, 1),
nticks = 9,
range = c("1982-01-01", "2018-11-22 15:10:14.3975"),
showgrid = FALSE,
showline = FALSE,
showspikes = FALSE,
tickmode = "auto",
title = "<br>",
type = "date",
zerolinewidth = 1
),
yaxis = list(
autorange = TRUE,
domain = c(0, 1),
range = c(-59416.6666667, 4251896.66667),
showgrid = TRUE,
showspikes = FALSE,
side = "right",
title = "<br>",
type = "linear"
)
)
p0 %>% layout(
annotations = list(
list(
x = "2017-01-01 08:00:00.13650",
y = 4147012.08557,
font = list(
color = "rgb(31, 119, 180)",
size = 14
),
showarrow = FALSE,
text = "GDP",
xref = "x",
yref = "y"
),
list(
x = "2017-01-01",
y = 2014401.37845,
font = list(
color = "rgb(255, 127, 14)",
size = 15
),
showarrow = FALSE,
text = "Consumption",
xref = "x",
yref = "y"
),
list(
x = "2017-01-01 08:00:00.13560",
y = 3203437.8329,
font = list(
color = "rgb(148, 103, 189)",
size = 15
),
showarrow = FALSE,
text = "Export",
xref = "x",
yref = "y"
),
list(
x = "2017-01-01 08:00:00.13610",
y = 2509189.21718,
font = list(
color = "rgb(140, 86, 75)",
size = 15
),
showarrow = FALSE,
text = "Import",
xref = "x",
yref = "y"
),
list(
x = "2017-01-01",
y = 1075946.98695,
font = list(
color = "rgb(214, 39, 40)",
size = 15
),
showarrow = FALSE,
text = "Investment",
xref = "x",
yref = "y"
),
list(
x = "2017-01-01 08:00:00.1353",
y = 707720.937129,
font = list(
color = "rgb(44, 160, 44)",
size = 15
),
showarrow = FALSE,
text = "Gov Purchase",
xref = "x",
yref = "y"
),
list(
x = 0.5,
y = 1.03007518797,
showarrow = FALSE,
text = "Chained-dallor year = 2011, in NTD million, Seasonally Adjusted",
xref = "paper",
yref = "paper"
),
list(
x = 0,
y = -0.0892116182573,
showarrow = FALSE,
text = "Source: <a href=\"data.gov.tw\">Taiwan Open Data</a>",
xanchor = "left",
xref = "paper",
yref = "paper"
)
),
dragmode = "zoom",
hovermode = "closest",
margin = list(
r = 80,
t = 55,
b = 90,
l = 60
),
showlegend = FALSE,
title = "Taiwan Real GDP and its Components",
xaxis = list(
autorange = TRUE,
categoryarraysrc = "tpemartin:82:10f067",
categoryorder = "array",
domain = c(0, 1),
nticks = 9,
range = c("1982-01-01", "2018-11-22 15:10:14.3975"),
showgrid = FALSE,
showline = FALSE,
showspikes = FALSE,
tickmode = "auto",
title = "<br>",
type = "date",
zerolinewidth = 1
),
yaxis = list(
autorange = TRUE,
domain = c(0, 1),
range = c(-59416.6666667, 4251896.66667),
showgrid = TRUE,
showspikes = FALSE,
side = "right",
title = "<br>",
type = "linear"
)
)
