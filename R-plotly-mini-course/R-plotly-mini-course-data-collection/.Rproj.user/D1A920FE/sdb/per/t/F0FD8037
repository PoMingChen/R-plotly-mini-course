{
    "collab_server" : "",
    "contents" : "---\ntitle: \"所得收入者十等分位組分界點之可支配所得(1976年起)\"\noutput: html_notebook\n---\n```\n資料集描述: \n所得收入者十等分位組分界點之可支配所得(1976年起)\n\n主要欄位說明: \nYear\n第一及第二等分位之分界點\n第二及第三等分位之分界點\n第三及第四等分位之分界點\n第四及第五等分位之分界點\n第五及第六等分位之分界點\n第六及第七等分位之分界點\n第七及第八等分位之分界點\n第八及第九等分位之分界點\n第九及第十等分位之分界點\n\n是41x10的dataframe\n```\n\n```{r}\nrm(list=ls())\n```\n\n1.引入XML資料\n```{r}\nlibrary(XML)\nlibrary(xml2)\nlibrary(dplyr)\nlibrary(magrittr)\n\n\nxml.url <- \"http://www.dgbas.gov.tw/public/data/open/localstat/024-所得收入者十等分位組分界點之可支配所得.xml\"\n\nxml.file5 <- xmlTreeParse(xml.url)\nclass(xml.file5)\n```\n\n2.認識XML資料\n```{r}\nxmltop5 <- xmlRoot(xml.file5)\nxmltop5\nstr(xmltop5)\nxmlSize(xmltop5)\nxmlSize(xmltop5[[1]])\nxmlSize(xmltop5[[2]])\n\nxml_NodeList5 <- xmlChildren(xmltop5)\nclass(xml_NodeList5)\n# XMLNodeList 也是List\nclass(xml_NodeList5[1])\nclass(xml_NodeList5[[1]])\n\nxmlValue(xml_NodeList5[[1]][[10]])\nxmlValue(xml_NodeList5[[41]][[10]])\n```\n\n3.拆解XML資料，整併成結構化data.frame\n```{r}\ndata_matrix5 <- c()\nfor(i in 1:41){\n  data_with_in_year <- xmlApply(xml_NodeList5[[i]], xmlValue)\n  data_matrix5 <- rbind(data_matrix5, data_with_in_year %>%\n   unlist)\n}\ndata_matrix5\n```\n\n4.整理資料型態，以及更改變數名稱\n```{r}\ndata_matrix5 %>% as.data.frame() -> data.final5\nfor(i in 2:10){\n  data.final5[[i]] <- as.numeric(as.character(data.final5[[i]]))\n}\n\ndata.final5 -> data.final.English5\n\ndata.final.English5$Year <- as.character(data.final.English5$Year)\n\n#所得收入者 十等分位組 分界點 之 可支配所得 (1976年起)\n#所得收入者 我的英文是用Income earner 簡寫 IE\n#可支配所得 DI\n\n#我有點不知道十等分位要怎麼表達，我是參考四分位數的q1 q2 q3 的方式。\n\ncolnames(data.final.English5)[2:10] <- c(\n\"DI_of_IE_in_household_Q1Q2_cut_off_point\", \n\"DI_of_IE_in_household_Q2Q3_cut_off_point\",\n\"DI_of_IE_in_household_Q3Q4_cut_off_point\",\n\"DI_of_IE_in_household_Q4Q5_cut_off_point\",\n\"DI_of_IE_in_household_Q5Q6_cut_off_point\",\n\"DI_of_IE_in_household_Q6Q7_cut_off_point\",\n\"DI_of_IE_in_household_Q7Q8_cut_off_point\",\n\"DI_of_IE_in_household_Q8Q9_cut_off_point\",\n\"DI_of_IE_in_household_Q9Q10_cut_off_point\"\n)\n#我不確定還要不要有in houshold的字眼。但是感覺，有，比較好。\n\ndata.final.English5\n```\n\n\n5.變數對照\n```\n所得收入者 十等分位組 分界點 之 可支配所得\n\n第一及第二等分位之分界點\n第二及第三等分位之分界點\n第三及第四等分位之分界點\n第四及第五等分位之分界點\n第五及第六等分位之分界點\n第六及第七等分位之分界點\n第七及第八等分位之分界點\n第八及第九等分位之分界點\n第九及第十等分位之分界點\n```",
    "created" : 1508945828591.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1982433047",
    "id" : "F0FD8037",
    "lastKnownWriteTime" : 1508947978,
    "last_content_update" : 1508947978331,
    "path" : "~/Documents/GitHub/Macroeconomics/Macroclass-XML-data-collection/Macroclass_DI_of_IE_in_household_cut_off_point_in_ten_groups_since_1976.Rmd",
    "project_path" : "Macroclass_DI_of_IE_in_household_cut_off_point_in_ten_groups_since_1976.Rmd",
    "properties" : {
        "chunk_output_type" : "inline",
        "tempName" : "Untitled1"
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}