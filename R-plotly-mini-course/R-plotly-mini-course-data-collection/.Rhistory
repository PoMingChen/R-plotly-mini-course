class(xml_NodeList3[1])
class(xml_NodeList3[[1]])
xmlValue(xml_NodeList3[[1]][[1]])
xmlValue(xml_NodeList3[[19]][[22]])
data_matrix3 <- c()
for(i in 1:19){
data_with_in_year <- xmlApply(xml_NodeList3[[i]], xmlValue)
data_matrix3 <- rbind(data_matrix3, data_with_in_year %>%
unlist)
}
data_matrix3
data_matrix3 %>% as.data.frame() -> data.final3
for(i in 2:22){
data.final3[[i]] <- as.numeric(as.character(data.final3[[i]]))
}
data.final3 -> data.final.English3
data.final.English3$Year <- as.character(data.final.English3$Year)
colnames(data.final.English3)[2:22] <- c(
"Taiwan",
"New_Taipei_City",
"Taipei_City",
"Taoyuan City",
"Taichung City",
"Tainan City",
"Kaohsiung City",
"Yilan County",
"Hsinchu County",
"Miaoli County",
"Changhua County",
"Nantou County",
"Yunlin County",
"Chiayi County",
"Pingtung County",
"Taitung County",
"Hualien County",
"Penghu County",
"Keelung City",
"Hsinchu City",
"Chiayi City"
)
data.final.English3
#共19x22
rm(list=ls())
xml.url <- "http://www.dgbas.gov.tw/public/data/open/localstat/014-戶數十等分位組分界點之可支配所得.xml"
xml.file4 <- xmlTreeParse(xml.url)
library(XML)
library(xml2)
library(dplyr)
library(magrittr)
xml.url <- "http://www.dgbas.gov.tw/public/data/open/localstat/014-戶數十等分位組分界點之可支配所得.xml"
xml.file4 <- xmlTreeParse(xml.url)
class(xml.file3)
library(XML)
library(xml2)
library(dplyr)
library(magrittr)
xml.url <- "http://www.dgbas.gov.tw/public/data/open/localstat/014-戶數十等分位組分界點之可支配所得.xml"
xml.file4 <- xmlTreeParse(xml.url)
class(xml.file4)
xmltop4 <- xmlRoot(xml.file4)
xmltop4
xmlValue(xml_NodeList3[[1]][[40]])
str(xmltop4)
xmlSize(xmltop4)
xmlSize(xmltop4[[1]])
xmlSize(xmltop4[[2]])
xml_NodeList4 <- xmlChildren(xmltop4)
class(xml_NodeList4)
class(xml_NodeList4[1])
class(xml_NodeList4[[1]])
xmlValue(xml_NodeList4[[1]][[41]])
xmlValue(xml_NodeList4[[1]][[10]])
xmlValue(xml_NodeList4[[41]][[10]])
xmlValue(xml_NodeList4[[41]][[11]])
xmlValue(xml_NodeList4[[41]][[10]])
data_matrix4 <- c()
for(i in 1:41){
data_with_in_year <- xmlApply(xml_NodeList4[[i]], xmlValue)
data_matrix4 <- rbind(data_matrix4, data_with_in_year %>%
unlist)
}
data_matrix4
data_matrix4 %>% as.data.frame() -> data.final4
data.final4
for(i in 2:10){
data.final3[[i]] <- as.numeric(as.character(data.final3[[i]]))
}
data_matrix4 %>% as.data.frame() -> data.final4
data.final4
for(i in 2:10){
data.final4[[i]] <- as.numeric(as.character(data.final4[[i]]))
}
data.final4 -> data.final.English4
data.final.English4$Year <- as.character(data.final.English4$Year)
data.final.English4
data.final.English4$第九及第十等分位之分界點
colnames(data.final.English4)[2:22] <- c(
"Taiwan",
"New_Taipei_City",
"Taipei_City",
"Taoyuan City",
"Taichung City",
"Tainan City",
"Kaohsiung City",
"Yilan County",
"Hsinchu County",
"Miaoli County",
"Changhua County",
"Nantou County",
"Yunlin County",
"Chiayi County",
"Pingtung County",
"Taitung County",
"Hualien County",
"Penghu County",
"Keelung City",
"Hsinchu City",
"Chiayi City"
)
data.final.English4$第九及第十等分位之分界點
colnames(data.final.English4)[2:22] <- c(
"Taiwan",
"New_Taipei_City",
"Taipei_City",
"Taoyuan City",
"Taichung City",
"Tainan City",
"Kaohsiung City",
"Yilan County",
"Hsinchu County",
"Miaoli County",
"Changhua County",
"Nantou County",
"Yunlin County",
"Chiayi County",
"Pingtung County",
"Taitung County",
"Hualien County",
"Penghu County",
"Keelung City",
"Hsinchu City",
"Chiayi City"
)
data.final.English4$第九及第十等分位之分界點
#colnames(data.final.English4)[2:22] <- c(
"Taiwan",
data_matrix4 %>% as.data.frame() -> data.final4
data.final4
for(i in 2:10){
data.final4[[i]] <- as.numeric(as.character(data.final4[[i]]))
}
data.final4 -> data.final.English4
data.final.English4$Year <- as.character(data.final.English4$Year)
data.final.English4
data.final.English4
data_matrix4 %>% as.data.frame() -> data.final4
data.final4
for(i in 2:10){
data.final4[[i]] <- as.numeric(as.character(data.final4[[i]]))
}
data.final4 -> data.final.English4
data.final.English4$Year <- as.character(data.final.English4$Year)
data.final.English4
#戶數 十等分位組 分界點之 可支配所得
#我有點不知道十等分位要怎麼表達，我是參考四分位數的q1 q2 q3 的方式。
colnames(data.final.English4)[2:10] <- c(
"DI_in_household_Q1Q2_cut_off_point",
"DI_in_household_Q2Q3_cut_off_point",
"DI_in_household_Q3Q4_cut_off_point",
"DI_in_household_Q4Q5_cut_off_point",
"DI_in_household_Q5Q6_cut_off_point",
"DI_in_household_Q6Q7_cut_off_point",
"DI_in_household_Q7Q8_cut_off_point",
"DI_in_household_Q8Q9_cut_off_point",
"DI_in_household_Q9Q10_cut_off_point"
)
data.final.English4
data_matrix4 %>% as.data.frame() -> data.final4
for(i in 2:10){
data.final4[[i]] <- as.numeric(as.character(data.final4[[i]]))
}
data.final4 -> data.final.English4
data.final.English4$Year <- as.character(data.final.English4$Year)
#戶數 十等分位組 分界點之 可支配所得
#我有點不知道十等分位要怎麼表達，我是參考四分位數的q1 q2 q3 的方式。
colnames(data.final.English4)[2:10] <- c(
"DI_in_household_Q1Q2_cut_off_point",
"DI_in_household_Q2Q3_cut_off_point",
"DI_in_household_Q3Q4_cut_off_point",
"DI_in_household_Q4Q5_cut_off_point",
"DI_in_household_Q5Q6_cut_off_point",
"DI_in_household_Q6Q7_cut_off_point",
"DI_in_household_Q7Q8_cut_off_point",
"DI_in_household_Q8Q9_cut_off_point",
"DI_in_household_Q9Q10_cut_off_point"
)
data.final.English4
rm(list=ls())
library(XML)
library(xml2)
library(dplyr)
library(magrittr)
xml.url <- "http://www.dgbas.gov.tw/public/data/open/localstat/014-戶數十等分位組分界點之可支配所得.xml"
xml.file4 <- xmlTreeParse(xml.url)
class(xml.file4)
xmltop4 <- xmlRoot(xml.file4)
xmltop4
str(xmltop4)
xmlSize(xmltop4)
xmlSize(xmltop4[[1]])
xmlSize(xmltop4[[2]])
xml_NodeList4 <- xmlChildren(xmltop4)
class(xml_NodeList4)
# XMLNodeList 也是List
class(xml_NodeList4[1])
class(xml_NodeList4[[1]])
xmlValue(xml_NodeList4[[1]][[10]])
xmlValue(xml_NodeList4[[41]][[10]])
data_matrix4 <- c()
for(i in 1:41){
data_with_in_year <- xmlApply(xml_NodeList4[[i]], xmlValue)
data_matrix4 <- rbind(data_matrix4, data_with_in_year %>%
unlist)
}
data_matrix4
data_matrix4 %>% as.data.frame() -> data.final4
for(i in 2:10){
data.final4[[i]] <- as.numeric(as.character(data.final4[[i]]))
}
data.final4 -> data.final.English4
data.final.English4$Year <- as.character(data.final.English4$Year)
#戶數 十等分位組 分界點之 可支配所得
#我有點不知道十等分位要怎麼表達，我是參考四分位數的q1 q2 q3 的方式。
colnames(data.final.English4)[2:10] <- c(
"DI_in_household_Q1Q2_cut_off_point",
"DI_in_household_Q2Q3_cut_off_point",
"DI_in_household_Q3Q4_cut_off_point",
"DI_in_household_Q4Q5_cut_off_point",
"DI_in_household_Q5Q6_cut_off_point",
"DI_in_household_Q6Q7_cut_off_point",
"DI_in_household_Q7Q8_cut_off_point",
"DI_in_household_Q8Q9_cut_off_point",
"DI_in_household_Q9Q10_cut_off_point"
)
data.final.English4
rm(list=ls())
library(XML)
library(xml2)
library(dplyr)
library(magrittr)
xml.url <- "http://www.dgbas.gov.tw/public/data/open/localstat/024-所得收入者十等分位組分界點之可支配所得.xml"
xml.file5 <- xmlTreeParse(xml.url)
class(xml.file5)
xmltop5 <- xmlRoot(xml.file5)
xmltop5
str(xmltop5)
xmlSize(xmltop5)
xmlSize(xmltop5[[1]])
xmlSize(xmltop5[[2]])
xml_NodeList5 <- xmlChildren(xmltop5)
class(xml_NodeList5)
class(xml_NodeList5[1])
class(xml_NodeList5[[1]])
class(xml_NodeList5[1])
class(xml_NodeList5[[1]])
xmlValue(xml_NodeList5[[1]][[10]])
xmlValue(xml_NodeList5[[41]][[10]])
xmlValue(xml_NodeList5[[42]][[10]])
xmlValue(xml_NodeList5[[1]][[11]])
data_matrix5 <- c()
for(i in 1:41){
data_with_in_year <- xmlApply(xml_NodeList4[[i]], xmlValue)
data_matrix5 <- rbind(data_matrix5, data_with_in_year %>%
unlist)
}
data_matrix5 <- c()
for(i in 1:41){
data_with_in_year <- xmlApply(xml_NodeList5[[i]], xmlValue)
data_matrix5 <- rbind(data_matrix5, data_with_in_year %>%
unlist)
}
data_matrix5
data_matrix5 %>% as.data.frame() -> data.final5
for(i in 2:10){
data.final5[[i]] <- as.numeric(as.character(data.final5[[i]]))
}
data.final5 -> data.final.English5
data.final.English5$Year <- as.character(data.final.English5$Year)
data.final.English5
data_matrix5 %>% as.data.frame() -> data.final5
for(i in 2:10){
data.final5[[i]] <- as.numeric(as.character(data.final5[[i]]))
}
data.final5 -> data.final.English5
data.final.English5$Year <- as.character(data.final.English5$Year)
data.final.English5
#所得收入者 十等分位組 分界點 之 可支配所得 (1976年起)
#所得收入者 我的英文是用Income earner 簡寫 IE
#可支配所得 DI
#我有點不知道十等分位要怎麼表達，我是參考四分位數的q1 q2 q3 的方式。
colnames(data.final.English5)[2:10] <- c(
"DI_of_IE_in_household_Q1Q2_cut_off_point",
"DI_of_IE_in_household_Q2Q3_cut_off_point",
"DI_of_IE_in_household_Q3Q4_cut_off_point",
"DI_of_IE_in_household_Q4Q5_cut_off_point",
"DI_of_IE_in_household_Q5Q6_cut_off_point",
"DI_of_IE_in_household_Q6Q7_cut_off_point",
"DI_of_IE_in_household_Q7Q8_cut_off_point",
"DI_of_IE_in_household_Q8Q9_cut_off_point",
"DI_of_IE_in_household_Q9Q10_cut_off_point"
)
data.final.English4
data_matrix5 %>% as.data.frame() -> data.final5
for(i in 2:10){
data.final5[[i]] <- as.numeric(as.character(data.final5[[i]]))
}
data.final5 -> data.final.English5
data.final.English5$Year <- as.character(data.final.English5$Year)
data.final.English5
#所得收入者 十等分位組 分界點 之 可支配所得 (1976年起)
#所得收入者 我的英文是用Income earner 簡寫 IE
#可支配所得 DI
#我有點不知道十等分位要怎麼表達，我是參考四分位數的q1 q2 q3 的方式。
colnames(data.final.English5)[2:10] <- c(
"DI_of_IE_in_household_Q1Q2_cut_off_point",
"DI_of_IE_in_household_Q2Q3_cut_off_point",
"DI_of_IE_in_household_Q3Q4_cut_off_point",
"DI_of_IE_in_household_Q4Q5_cut_off_point",
"DI_of_IE_in_household_Q5Q6_cut_off_point",
"DI_of_IE_in_household_Q6Q7_cut_off_point",
"DI_of_IE_in_household_Q7Q8_cut_off_point",
"DI_of_IE_in_household_Q8Q9_cut_off_point",
"DI_of_IE_in_household_Q9Q10_cut_off_point"
)
data.final.English5
data_matrix4 %>% as.data.frame() -> data.final4
library(XML)
library(xml2)
library(dplyr)
library(magrittr)
xml.url <- "http://www.dgbas.gov.tw/public/data/open/localstat/014-戶數十等分位組分界點之可支配所得.xml"
xml.file4 <- xmlTreeParse(xml.url)
class(xml.file4)
xmltop4 <- xmlRoot(xml.file4)
xmltop4
str(xmltop4)
xmlSize(xmltop4)
xmlSize(xmltop4[[1]])
xmlSize(xmltop4[[2]])
xml_NodeList4 <- xmlChildren(xmltop4)
class(xml_NodeList4)
# XMLNodeList 也是List
class(xml_NodeList4[1])
class(xml_NodeList4[[1]])
xmlValue(xml_NodeList4[[1]][[10]])
xmlValue(xml_NodeList4[[41]][[10]])
data_matrix4 <- c()
for(i in 1:41){
data_with_in_year <- xmlApply(xml_NodeList4[[i]], xmlValue)
data_matrix4 <- rbind(data_matrix4, data_with_in_year %>%
unlist)
}
data_matrix4
data_matrix4 %>% as.data.frame() -> data.final4
for(i in 2:10){
data.final4[[i]] <- as.numeric(as.character(data.final4[[i]]))
}
data.final4 -> data.final.English4
data.final.English4$Year <- as.character(data.final.English4$Year)
#戶數 十等分位組 分界點之 可支配所得
#我有點不知道十等分位要怎麼表達，我是參考四分位數的q1 q2 q3 的方式。
colnames(data.final.English4)[2:10] <- c(
"DI_in_household_Q1Q2_cut_off_point",
"DI_in_household_Q2Q3_cut_off_point",
"DI_in_household_Q3Q4_cut_off_point",
"DI_in_household_Q4Q5_cut_off_point",
"DI_in_household_Q5Q6_cut_off_point",
"DI_in_household_Q6Q7_cut_off_point",
"DI_in_household_Q7Q8_cut_off_point",
"DI_in_household_Q8Q9_cut_off_point",
"DI_in_household_Q9Q10_cut_off_point"
)
data.final.English4
library(XML)
library(xml2)
library(dplyr)
library(magrittr)
xml.url <- "http://www.dgbas.gov.tw/public/data/open/localstat/024-所得收入者十等分位組分界點之可支配所得.xml"
xml.file5 <- xmlTreeParse(xml.url)
class(xml.file5)
xmltop5 <- xmlRoot(xml.file5)
xmltop5
str(xmltop5)
xmlSize(xmltop5)
xmlSize(xmltop5[[1]])
xmlSize(xmltop5[[2]])
xml_NodeList5 <- xmlChildren(xmltop5)
class(xml_NodeList5)
# XMLNodeList 也是List
class(xml_NodeList5[1])
class(xml_NodeList5[[1]])
xmlValue(xml_NodeList5[[1]][[10]])
xmlValue(xml_NodeList5[[41]][[10]])
data_matrix5 <- c()
for(i in 1:41){
data_with_in_year <- xmlApply(xml_NodeList5[[i]], xmlValue)
data_matrix5 <- rbind(data_matrix5, data_with_in_year %>%
unlist)
}
data_matrix5
data_matrix5 %>% as.data.frame() -> data.final5
for(i in 2:10){
data.final5[[i]] <- as.numeric(as.character(data.final5[[i]]))
}
data.final5 -> data.final.English5
#所得收入者 十等分位組 分界點 之 可支配所得 (1976年起)
#所得收入者 我的英文是用Income earner 簡寫 IE
#可支配所得 DI
#我有點不知道十等分位要怎麼表達，我是參考四分位數的q1 q2 q3 的方式。
colnames(data.final.English5)[2:10] <- c(
"DI_of_IE_in_household_Q1Q2_cut_off_point",
"DI_of_IE_in_household_Q2Q3_cut_off_point",
"DI_of_IE_in_household_Q3Q4_cut_off_point",
"DI_of_IE_in_household_Q4Q5_cut_off_point",
"DI_of_IE_in_household_Q5Q6_cut_off_point",
"DI_of_IE_in_household_Q6Q7_cut_off_point",
"DI_of_IE_in_household_Q7Q8_cut_off_point",
"DI_of_IE_in_household_Q8Q9_cut_off_point",
"DI_of_IE_in_household_Q9Q10_cut_off_point"
)
data.final.English5
data_matrix5 %>% as.data.frame() -> data.final5
for(i in 2:10){
data.final5[[i]] <- as.numeric(as.character(data.final5[[i]]))
}
data.final.English5$Year <- as.character(data.final.English5$Year)
data.final5 -> data.final.English5
#所得收入者 十等分位組 分界點 之 可支配所得 (1976年起)
#所得收入者 我的英文是用Income earner 簡寫 IE
#可支配所得 DI
#我有點不知道十等分位要怎麼表達，我是參考四分位數的q1 q2 q3 的方式。
colnames(data.final.English5)[2:10] <- c(
"DI_of_IE_in_household_Q1Q2_cut_off_point",
"DI_of_IE_in_household_Q2Q3_cut_off_point",
"DI_of_IE_in_household_Q3Q4_cut_off_point",
"DI_of_IE_in_household_Q4Q5_cut_off_point",
"DI_of_IE_in_household_Q5Q6_cut_off_point",
"DI_of_IE_in_household_Q6Q7_cut_off_point",
"DI_of_IE_in_household_Q7Q8_cut_off_point",
"DI_of_IE_in_household_Q8Q9_cut_off_point",
"DI_of_IE_in_household_Q9Q10_cut_off_point"
)
data.final.English5
data.final.English5$Year <- as.character(data.final.English5$Year)
data.final5 -> data.final.English5
colnames(data.final.English5)[2:10] <- c(
"DI_of_IE_in_household_Q1Q2_cut_off_point",
"DI_of_IE_in_household_Q2Q3_cut_off_point",
"DI_of_IE_in_household_Q3Q4_cut_off_point",
"DI_of_IE_in_household_Q4Q5_cut_off_point",
"DI_of_IE_in_household_Q5Q6_cut_off_point",
"DI_of_IE_in_household_Q6Q7_cut_off_point",
"DI_of_IE_in_household_Q7Q8_cut_off_point",
"DI_of_IE_in_household_Q8Q9_cut_off_point",
"DI_of_IE_in_household_Q9Q10_cut_off_point"
)
data.final.English5
data_matrix5 %>% as.data.frame() -> data.final5
for(i in 2:10){
data.final5[[i]] <- as.numeric(as.character(data.final5[[i]]))
}
data.final5 -> data.final.English5
data.final.English5$Year <- as.character(data.final.English5$Year)
#所得收入者 十等分位組 分界點 之 可支配所得 (1976年起)
#所得收入者 我的英文是用Income earner 簡寫 IE
#可支配所得 DI
#我有點不知道十等分位要怎麼表達，我是參考四分位數的q1 q2 q3 的方式。
colnames(data.final.English5)[2:10] <- c(
"DI_of_IE_in_household_Q1Q2_cut_off_point",
"DI_of_IE_in_household_Q2Q3_cut_off_point",
"DI_of_IE_in_household_Q3Q4_cut_off_point",
"DI_of_IE_in_household_Q4Q5_cut_off_point",
"DI_of_IE_in_household_Q5Q6_cut_off_point",
"DI_of_IE_in_household_Q6Q7_cut_off_point",
"DI_of_IE_in_household_Q7Q8_cut_off_point",
"DI_of_IE_in_household_Q8Q9_cut_off_point",
"DI_of_IE_in_household_Q9Q10_cut_off_point"
)
data.final.English5
data_matrix5 %>% as.data.frame() -> data.final5
for(i in 2:10){
data.final5[[i]] <- as.numeric(as.character(data.final5[[i]]))
}
data.final5 -> data.final.English5
data.final.English5$Year <- as.character(data.final.English5$Year)
#所得收入者 十等分位組 分界點 之 可支配所得 (1976年起)
#所得收入者 我的英文是用Income earner 簡寫 IE
#可支配所得 DI
#我有點不知道十等分位要怎麼表達，我是參考四分位數的q1 q2 q3 的方式。
colnames(data.final.English5)[2:10] <- c(
"DI_of_IE_in_household_Q1Q2_cut_off_point",
"DI_of_IE_in_household_Q2Q3_cut_off_point",
"DI_of_IE_in_household_Q3Q4_cut_off_point",
"DI_of_IE_in_household_Q4Q5_cut_off_point",
"DI_of_IE_in_household_Q5Q6_cut_off_point",
"DI_of_IE_in_household_Q6Q7_cut_off_point",
"DI_of_IE_in_household_Q7Q8_cut_off_point",
"DI_of_IE_in_household_Q8Q9_cut_off_point",
"DI_of_IE_in_household_Q9Q10_cut_off_point"
)
#我不確定還要不要有in houshold的字眼。但是感覺，有，比較好。
data.final.English5
